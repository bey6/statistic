**预期指标**

200 万数据平局检索时间 5 秒内。

**实验配置**

| 服务器        | CPU 核数 | 内存大小 | 存储空间 | 操作系统                             | 部署软件                           |
| ------------- | -------- | -------- | -------- | ------------------------------------ | ---------------------------------- |
| 统计应用      | 4        | 16       | SSD-256G | Ubuntu 20.04.1 LTS                   | Docker-20.10.2,Node.js-14.15.4 LTS |
| ES 集群节点 1 | 4        | 16       | SSD-256G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen              |
| ES 集群节点 2 | 4        | 16       | SSD-256G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen              |
| ES 集群节点 3 | 4        | 16       | SSD-256G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen              |

**性能测试结果如下**

| 数据量(万) | 检索条件                             | 检索方式    | 第一页耗时(ms) |
| :--------: | ------------------------------------ | ----------- | -------------- |
|     24     | age > 0                              | search      | 20~400         |
|     75     | age > 0                              | search      | 30~400         |
|     75     | age > 0                              | aggregation | 120~400        |
|     75     | M81.991 diff G40.902                 | search      | 2599           |
|     75     | M81.991,E22.101 diff G40.902,Z51.101 | search      | 4287           |
|     75     | M81.991 diff G40.902                 | aggregation | 495~3789       |
|     75     | M81.991,E22.101 diff G40.902,Z51.101 | aggregation | 660~1307       |

耗时区间差距较大的原因是因为重复检索时热点数据已经被加载到内存，这也使得后续的检索速度可以得到在一定程度上站在前人的肩膀上获得更高的性能。

24 万数据量时的检索总的来说与 75 万数据量的检索性能没有显著的变化，由于可观察的样例有限，所以可以粗略的猜测当数据量在 200 万时检索性能不会有大幅度下滑，预测会在 50 ~ 10000 毫秒内完成。

由于采取的 wsl 缓存策略，因此非第一页的检索时间不会有大幅度的变化，这个特性在进行异次病发检索的翻页时尤为突出。

**预期配置**

| 服务器        | CPU 核数 | 内存大小 | 存储空间 | 操作系统                             | 部署软件                                  |
| ------------- | -------- | -------- | -------- | ------------------------------------ | ----------------------------------------- |
| 统计应用      | 32       | 64       | SSD-512G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Node.js-14.15.4 LTS,Screen |
| ES 集群节点 1 | 32       | 64       | SSD-512G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen                     |
| ES 集群节点 2 | 32       | 64       | SSD-512G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen                     |
| ES 集群节点 3 | 32       | 64       | SSD-512G | CentOS Linux release 7.6.1810 (Core) | Docker-20.10.2,Screen                     |

1. 内存 16G、硬盘 256G、CPU 4 核
2. CentOS 7、Docker 20.10.2、Node.js-14.15.4 LTS、screen
3. Docker 镜像: elasticsearch-7.6.2、elasticsearch-analysis-ik-7.6.2、kibana-7.6.2
4. 修改虚拟内存，/etc/sysctl.conf 增加 vm.max_map_count=262144
5. 同步时区时间，关闭防火墙。
6. 需要 3 台。
